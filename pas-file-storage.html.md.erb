---
title: Configuring File Storage for TAS for VMs
owner: Releng
---

This topic provides instructions for configuring file storage for <%= vars.app_runtime_full %> (<%= vars.app_runtime_abbr %>) based on your IaaS and installation method. See the section that applies to your use case.

To minimize system downtime, <%= vars.company_name %> recommends using highly resilient and redundant _external_ filestores for your <%= vars.app_runtime_abbr %> file storage. For more factors to consider when selecting file storage, see [Configure File Storage](../../upgrading/configuring.html#file-storage) in _Configuring <%= vars.app_runtime_abbr %> for Upgrades_.


## <a id="internal"></a> Internal File Storage

<%# Find this partial in GitHub at `pivotal-cf/docs-partials` %>
<%= partial "/pcf/core/#{vars.current_major_version.sub('.', '-')}/filestore_internal" %>

## <a id="aws"></a> AWS

This section describes how to configure file storage for AWS.

<p class="note"><strong>Note:</strong> If you followed the instructions in <a href="https://docs.pivotal.io/platform/<%= vars.current_major_version.sub('.', '-') %>/om/aws/prepare-env-manual.html">Installing <%= vars.platform_name %> on AWS Manually</a>, you created the necessary resources for external S3-compatible file storage.</p>

For production-level <%= vars.platform_name %> deployments on AWS,
<%= vars.company_name %> recommends selecting the **External S3-compatible filestore**.
For more information about production-level <%= vars.platform_name %> deployments on AWS,
see the [AWS Reference Architecture on AWS](https://docs.pivotal.io/platform/<%= vars.current_major_version.sub('.', '-') %>/plan/aws/aws_ref_arch.html).

<%# Find this partial in GitHub at `pivotal-cf/docs-partials` %>
<%= partial(:"/pcf/core/#{vars.current_major_version.sub('.', '-')}/filestore_s3_config", :locals => { :aws => true }) %>

## <a id="gcp"></a> GCP

This section describes how to configure file storage for GCP. Follow the instructions that correspond to your installation method: [Manual](#gcp-manual) or [Terraform](#gcp-terraform).

For production-level <%= vars.platform_name %> deployments on GCP, <%= vars.company_name %> recommends selecting **External Google Cloud Storage**.
For more information about production-level <%= vars.platform_name %> deployments on GCP, see the [Reference Architecture for <%= vars.platform_name %> on GCP](https://docs.pivotal.io/platform/<%= vars.current_major_version.sub('.', '-') %>/plan/gcp/gcp_ref_arch.html).

### <a id="gcp-manual"></a> Manual

This section describes how to configure file storage for GCP if you installed <%= vars.platform_name %> manually.

<%# Find this partial in GitHub at `pivotal-cf/docs-partials` %>
<%= partial "/pcf/core/#{vars.current_major_version.sub('.', '-')}/filestore_gcp_config" %>

### <a id="gcp-terraform"></a> Terraform

This section describes how to configure file storage for GCP if you installed <%= vars.platform_name %> with Terraform.

<%# Find this partial in GitHub at `pivotal-cf/docs-partials` %>
<%= partial "/pcf/core/#{vars.current_major_version.sub('.', '-')}/filestore_gcp_config_terraform" %>

## <a id="azure"></a> Azure

This section describes how to configure file storage for Azure.

For production-level <%= vars.platform_name %> deployments on Azure, the recommended selection is Azure Storage. For more information about production-level <%= vars.platform_name %> deployments on Azure, see the [Reference Architecture for <%= vars.platform_name %> on Azure](https://docs.pivotal.io/platform/<%= vars.current_major_version.sub('.', '-') %>/plan/azure/azure_ref_arch.html).

For more factors to consider when selecting file storage, see <a href="https://docs.pivotal.io/platform/<%= vars.current_major_version.sub('.', '-') %>/upgrading/configuring.html#file-storage">Considerations for Selecting File Storage in <%= vars.platform_name %></a>.

<%# Find this partial in GitHub at `pivotal-cf/docs-partials` %>
<%= partial "/pcf/core/#{vars.current_major_version.sub('.', '-')}/filestore_azure_config" %>

## <a id="openstack"></a> OpenStack

For production-level <%= vars.platform_name %> deployments on OpenStack, the recommended selection is **External S3-compatible filestore**.

For more factors to consider when selecting file storage, [Configure File Storage](../../upgrading/configuring.html#file-storage) in _Configuring <%= vars.app_runtime_abbr %> for Upgrades_..

<%# Find this partial in GitHub at `pivotal-cf/docs-partials` %>
<%= partial(:"/pcf/core/#{vars.current_major_version.sub('.', '-')}/filestore_s3_config", :locals => { :aws => false }) %>


## <a id="vsphere"></a> vSphere

For production-level <%= vars.platform_name %> deployments on vSphere, the recommended selection is **External S3-compatible filestore** and the use of an external filestore. For more information about production-level <%= vars.platform_name %> deployments on vSphere, see the [Reference Architecture for <%= vars.platform_name %> on vSphere](https://docs.pivotal.io/platform/<%= vars.current_major_version.sub('.', '-') %>/plan/vsphere/vsphere_ref_arch.html).

For more factors to consider when selecting file storage, [Configure File Storage](../../upgrading/configuring.html#file-storage) in _Configuring <%= vars.app_runtime_abbr %> for Upgrades_.

<%# Find this partial in GitHub at `pivotal-cf/docs-partials` %>
<%= partial(:"/pcf/core/#{vars.current_major_version.sub('.', '-')}/filestore_s3_config", :locals => { :aws => false }) %>
